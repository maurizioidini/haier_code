AWSTemplateFormatVersion: '2010-09-09'

Parameters:
  Environment:
    Type: String
    Description: 'The name of the environment (e.g., test, prod).'
    AllowedValues: ['test', 'prod']

Mappings:
  EnvMap:
    test:
      AccountNumber: '592141405271'
    prod:
      AccountNumber: '975942111920'

Resources:
  Pipeline:
    Type: AWS::CodePipeline::Pipeline
    Properties:
      Name: !Sub 'dp-sls-sales-pipeline-${Environment}'
      RoleArn: arn:aws:iam::590184051506:role/pa-pipeline-role-cicd
      ArtifactStore:
        EncryptionKey:
          Id: arn:aws:kms:eu-west-1:590184051506:key/62068e0a-9828-4961-a5cc-8e4ee2c93f12
          Type: KMS
        Location: codepipeline-encrypted-artifacts
        Type: S3
      PipelineType: V1
      RestartExecutionOnUpdate: false
      Stages:
        - Name: Source
          Actions:
            - Name: SourceCodeCommit
              ActionTypeId:
                Category: Source
                Owner: AWS
                Provider: CodeCommit
                Version: 1
              Configuration:
                RepositoryName: dp-sls-sales
                BranchName: !Ref Environment
                PollForSourceChanges: false
              InputArtifacts: []
              OutputArtifacts:
                - Name: SourceArtifact
              Region: eu-west-1
              RunOrder: 1
        - Name: DeployBucket
          Actions:
            - Name: DeployBucketZwwOtcLogarea
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_NAMED_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-zww-otc-logarea-bucket-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-buckets.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-bucket-zww-otc-logarea-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1

            - Name: DeployBucketVbbe
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_NAMED_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-vbbe-bucket-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-buckets.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-bucket-vbbe-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1

            - Name: DeployBucketPrcdHeader
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_NAMED_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-prcd-header-bucket-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-buckets.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-bucket-prcd-header-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1

            - Name: DeployBucketPrcdItem
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_NAMED_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-prcd-item-bucket-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-buckets.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-bucket-prcd-item-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1

            - Name: DeployBucketVbfa
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_NAMED_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-vbfa-bucket-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-buckets.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-bucket-vbfa-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1

            - Name: DeployBucketMappingReturnReasons
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_NAMED_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-mapping-return-reasons-bucket-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-buckets.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-bucket-mapping-return-reasons-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1

            - Name: DeployBucketMappingSalesOfficeNetworkUk
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_NAMED_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-mapping-sales-office-network-uk-bucket-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-buckets.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-bucket-mapping-sales-office-network-uk-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1

            - Name: DeployBucketVbap
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_NAMED_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-vbap-bucket-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-buckets.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-bucket-vbap-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1

            - Name: DeployBucketVbep
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_NAMED_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-vbep-bucket-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-buckets.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-bucket-vbep-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1

            - Name: DeployBucketVbak
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_NAMED_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-vbak-bucket-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-buckets.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-bucket-vbak-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1

            - Name: DeployBucketBut000
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_NAMED_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-but000-bucket-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-buckets.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-bucket-but000-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1

            - Name: DeployBucketTinct
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_NAMED_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-tinct-bucket-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-buckets.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-bucket-tinct-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1

            - Name: DeployBucketZwwScpTPlord
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_NAMED_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-zww-scp-t-plord-bucket-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-buckets.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-bucket-zww-scp-t-plord-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1

            - Name: DeployBucketZwwScpTSlocla
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_NAMED_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-zww-scp-t-slocla-bucket-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-buckets.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-bucket-zww-scp-t-slocla-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1

            - Name: DeployBucketTvakt
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_NAMED_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-tvakt-bucket-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-buckets.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-bucket-tvakt-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1

            - Name: DeployBucketTvaut
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_NAMED_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-tvaut-bucket-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-buckets.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-bucket-tvaut-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1

            - Name: DeployBucketVbkd
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_NAMED_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-vbkd-bucket-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-buckets.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-bucket-vbkd-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1

            - Name: DeployBucketTvv3t
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_NAMED_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-tvv3t-bucket-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-buckets.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-bucket-tvv3t-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1

            - Name: DeployBucketTvv5t
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_NAMED_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-tvv5t-bucket-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-buckets.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-bucket-tvv5t-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1

            - Name: DeployBucketTvgrt
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_NAMED_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-tvgrt-bucket-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-buckets.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-bucket-tvgrt-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1

            - Name: DeployBucketDd07t
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_NAMED_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-dd07t-bucket-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-buckets.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-bucket-dd07t-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1

            - Name: DeployBucketT176t
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_NAMED_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-t176t-bucket-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-buckets.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-bucket-t176t-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1

            - Name: DeployBuckettvst
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_NAMED_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-tvst-bucket-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-buckets.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-bucket-tvst-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1

            - Name: DeployBucketTwst
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_NAMED_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-twst-bucket-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-buckets.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-bucket-twst-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1

            - Name: DeployBucketT007a
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_NAMED_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-t007a-bucket-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-buckets.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-bucket-t007a-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1

            - Name: DeployBucketT007s
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_NAMED_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-t007s-bucket-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-buckets.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-bucket-t007s-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1

            - Name: DeployBucketT042zt
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_NAMED_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-t042zt-bucket-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-buckets.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-bucket-t042zt-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1

            - Name: DeployBucketY052
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_NAMED_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-t052-bucket-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-buckets.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-bucket-t052-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1

            - Name: DeployBucketT052u
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_NAMED_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-t052u-bucket-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-buckets.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-bucket-t052u-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1

            - Name: DeployBucketTcurr
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_NAMED_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-tcurr-bucket-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-buckets.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-bucket-tcurr-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1

            - Name: DeployBucketVbpa
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_NAMED_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-vbpa-bucket-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-buckets.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-bucket-vbpa-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1

            - Name: DeployBucketKna1
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_NAMED_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-kna1-bucket-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-buckets.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-bucket-kna1-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1

            - Name: DeployBucketKnvv
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_NAMED_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-knvv-bucket-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-buckets.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-bucket-knvv-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1

            - Name: DeployBucketTvak
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_NAMED_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-tvak-bucket-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-buckets.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/s3/dp-sls-sales-bucket-tvak-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1
        - Name: DeployAppflowFlow
          Actions:
            - Name: DeployAppflowZwwotclogareaFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-appflow-zww-otc-logarea-flow-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-appflow-flows.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-zww-otc-logarea-appflow-flow-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1
            - Name: DeployAppflowVbbeFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-appflow-vbbe-flow-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-appflow-flows.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-vbbe-appflow-flow-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1
            - Name: DeployAppflowTvburFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-appflow-tvbur-flow-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-appflow-flows_newpath.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-tvbur-appflow-flow-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1
            - Name: DeployAppflowMardFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-appflow-mard-flow-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-appflow-flows_newpath.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-mard-appflow-flow-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1
            - Name: DeployAppflowT001lFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-appflow-t001l-flow-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-appflow-flows_newpath.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-t001l-appflow-flow-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1
            - Name: DeployAppflowTvkoFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-appflow-tvko-flow-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-appflow-flows_newpath.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-tvko-appflow-flow-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1
            - Name: DeployAppflowVbfaFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-appflow-vbfa-flow-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-appflow-flows.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-vbfa-appflow-flow-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1
            - Name: DeployAppflowPrcdHeaderFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-appflow-prcd-header-flow-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-appflow-flows.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-prcd-header-appflow-flow-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1
            - Name: DeployAppflowPrcdItemFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-appflow-prcd-item-flow-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-appflow-flows.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-prcd-item-appflow-flow-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1

            - Name: DeployAppflowPrcdBdFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-appflow-prcd-bd-flow-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-appflow-flows_newpath.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-prcd-bd-appflow-flow-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1

            - Name: DeployAppflowPrcdBdFlowInitialLoad
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-appflow-prcd-bd-initial-load-flow-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-appflow-flows_newpath.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-prcd-bd-initial-load-appflow-flow-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1

            - Name: DeployAppflowPrcdInvFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-appflow-prcd-inv-flow-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-appflow-flows_newpath.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-prcd-inv-appflow-flow-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1

            - Name: DeployAppflowVbapFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-appflow-vbap-flow-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-appflow-flows.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-vbap-appflow-flow-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1
            - Name: DeployAppflowVbepFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-appflow-vbep-flow-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-appflow-flows.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-vbep-appflow-flow-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1
            - Name: DeployAppflowVbakFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-appflow-vbak-flow-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-appflow-flows.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-vbak-appflow-flow-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1
            - Name: DeployAppflowBut000Flow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-appflow-but000-flow-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-appflow-flows.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-but000-appflow-flow-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1
            - Name: DeployAppflowTinctFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-appflow-tinct-flow-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-appflow-flows.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-tinct-appflow-flow-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1
            - Name: DeployAppflowZwwscptplordFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-appflow-zww-scp-t-plord-flow-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-appflow-flows.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-zww-scp-t-plord-appflow-flow-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1
            - Name: DeployAppflowZwwscptsloclaFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-appflow-zww-scp-t-slocla-flow-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-appflow-flows.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-zww-scp-t-slocla-appflow-flow-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1
            - Name: DeployAppflowTvaktFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-appflow-tvakt-flow-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-appflow-flows.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-tvakt-appflow-flow-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1
            - Name: DeployAppflowTvautFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-appflow-tvaut-flow-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-appflow-flows.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-tvaut-appflow-flow-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1
            - Name: DeployAppflowVbkdFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-appflow-vbkd-flow-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-appflow-flows.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-vbkd-appflow-flow-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1
            - Name: DeployAppflowTvv3tFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-appflow-tvv3t-flow-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-appflow-flows.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-tvv3t-appflow-flow-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1
            - Name: DeployAppflowTvv5tFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-appflow-tvv5t-flow-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-appflow-flows.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-tvv5t-appflow-flow-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1
            - Name: DeployAppflowTvgrtFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-appflow-tvgrt-flow-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-appflow-flows.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-tvgrt-appflow-flow-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1
            - Name: DeployAppflowDd07tFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-appflow-dd07t-flow-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-appflow-flows.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-dd07t-appflow-flow-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1
            - Name: DeployAppflowT176tFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-appflow-t176t-flow-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-appflow-flows.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-t176t-appflow-flow-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1
            - Name: DeployAppflowTvstFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-appflow-tvst-flow-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-appflow-flows.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-tvst-appflow-flow-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1
            - Name: DeployAppflowTwstFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-appflow-twst-flow-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-appflow-flows.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-twst-appflow-flow-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1
            - Name: DeployAppflowT007aFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-appflow-t007a-flow-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-appflow-flows.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-t007a-appflow-flow-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1
            - Name: DeployAppflowT007sFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-appflow-t007s-flow-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-appflow-flows.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-t007s-appflow-flow-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1
            - Name: DeployAppflowT042ztFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-appflow-t042zt-flow-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-appflow-flows.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-t042zt-appflow-flow-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1
            - Name: DeployAppflowT052Flow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-appflow-t052-flow-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-appflow-flows.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-t052-appflow-flow-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1
            - Name: DeployAppflowT052uFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-appflow-t052u-flow-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-appflow-flows.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-t052u-appflow-flow-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1
            - Name: DeployAppflowTcurrFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-appflow-tcurr-flow-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-appflow-flows.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-tcurr-appflow-flow-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1
            - Name: DeployAppflowVbpaFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-appflow-vbpa-flow-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-appflow-flows.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-vbpa-appflow-flow-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1
            - Name: DeployAppflowKna1Flow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-appflow-kna1-flow-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-appflow-flows.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-kna1-appflow-flow-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1
            - Name: DeployAppflowKnvvFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-appflow-knvv-flow-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-appflow-flows.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-knvv-appflow-flow-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1
            - Name: DeployAppflowTvakFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-appflow-tvak-flow-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-appflow-flows.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/appflow/dp-sls-sales-tvak-appflow-flow-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1
        - Name: DeployGlue
          Actions:
            - Name: DeployGlueRole
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM,CAPABILITY_NAMED_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-glue-role-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/glue/role/dp-sls-sales-glue-role.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/glue/role/dp-sls-sales-glue-role-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1

            - Name: DeployGlueJobZwwotclogareaFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-glue-job-zww-otc-logarea-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-glue-jobs.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-zww-otc-logarea-glue-jobs-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 2

            - Name: DeployGlueJobVbbeFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-glue-job-vbbe-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-glue-jobs.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-vbbe-glue-jobs-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 2

            - Name: DeployGlueJobTvburFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-glue-job-tvbur-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-glue-jobs_newpath.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-tvbur-glue-jobs-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 2

            - Name: DeployGlueJobMardFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-glue-job-mard-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-glue-jobs_newpath.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-mard-glue-jobs-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 2

            - Name: DeployGlueJobT001lFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-glue-job-t001l-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-glue-jobs_newpath.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-t001l-glue-jobs-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 2

            - Name: DeployGlueJobTvkoFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-glue-job-tvko-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-glue-jobs_newpath.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-tvko-glue-jobs-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 2

            - Name: DeployGlueJobPrcdHeaderFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-glue-job-prcd-header-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-glue-jobs.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-prcd-header-glue-jobs-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 2

            - Name: DeployGlueJobPrcdItemFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-glue-job-prcd-item-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-glue-jobs.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-prcd-item-glue-jobs-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 2

            - Name: DeployGlueJobPrcdInv
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-glue-job-prcd-inv-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-glue-jobs_newpath.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-prcd-inv-glue-jobs-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 2

            - Name: DeployGlueJobPrcdBd
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-glue-job-prcd-bd-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-glue-jobs_newpath.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-prcd-bd-glue-jobs-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 2

            - Name: DeployGlueJobPrcdBdInitialLoad
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-glue-job-prcd-bd-initial-load-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-initial-load-glue-jobs.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-prcd-bd-initial-load-glue-jobs-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 2

            - Name: DeployGlueJobVbfaFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-glue-job-vbfa-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-glue-jobs.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-vbfa-glue-jobs-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 2

            - Name: DeployGlueJobVbapFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-glue-job-vbap-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-glue-jobs.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-vbap-glue-jobs-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 2

            - Name: DeployGlueJobVbepFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-glue-job-vbep-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-glue-jobs.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-vbep-glue-jobs-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 2

            - Name: DeployGlueJobVbakFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-glue-job-vbak-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-glue-jobs.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-vbak-glue-jobs-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 2

            - Name: DeployGlueJobBut000Flow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-glue-job-but000-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-glue-jobs.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-but000-glue-jobs-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 2

            - Name: DeployGlueJobTinctFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-glue-job-tinct-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-glue-jobs.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-tinct-glue-jobs-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 2

            - Name: DeployGlueJobZwwscptplordFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-glue-job-zww-scp-t-plord-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-glue-jobs.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-zww-scp-t-plord-glue-jobs-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 2

            - Name: DeployGlueJobZwwscptsloclaFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-glue-job-zww-scp-t-slocla-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-glue-jobs.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-zww-scp-t-slocla-glue-jobs-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 2

            - Name: DeployGlueJobTvaktFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-glue-job-tvakt-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-glue-jobs.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-tvakt-glue-jobs-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 2

            - Name: DeployGlueJobMappingReturnReasons
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-glue-job-mapping-return-reasons-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-glue-jobs.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-mapping-return-reasons-glue-jobs-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 2

            - Name: DeployGlueJobMappingSalesOfficeNetworkUk
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-glue-job-mapping-sales-office-network-uk-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-glue-jobs.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-mapping-sales-office-network-uk-glue-jobs-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 2

            - Name: DeployGlueJobTvautFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-glue-job-tvaut-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-glue-jobs.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-tvaut-glue-jobs-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 2

            - Name: DeployGlueJobVbkdFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-glue-job-vbkd-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-glue-jobs.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-vbkd-glue-jobs-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 2

            - Name: DeployGlueJobTvv3tFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-glue-job-tvv3t-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-glue-jobs.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-tvv3t-glue-jobs-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 2

            - Name: DeployGlueJobTvv5tFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-glue-job-tvv5t-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-glue-jobs.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-tvv5t-glue-jobs-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 2

            - Name: DeployGlueJobTvgrtFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-glue-job-tvgrt-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-glue-jobs.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-tvgrt-glue-jobs-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 2

            - Name: DeployGlueJobDd07tFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-glue-job-dd07t-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-glue-jobs.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-dd07t-glue-jobs-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 2

            - Name: DeployGlueJobT176tFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-glue-job-t176t-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-glue-jobs.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-t176t-glue-jobs-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 2

            - Name: DeployGlueJobTvstFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-glue-job-tvst-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-glue-jobs.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-tvst-glue-jobs-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 2

            - Name: DeployGlueJobTwstFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-glue-job-twst-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-glue-jobs.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-twst-glue-jobs-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 2

            - Name: DeployGlueJobT007aFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-glue-job-t007a-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-glue-jobs.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-t007a-glue-jobs-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 2

            - Name: DeployGlueJobT007sFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-glue-job-t007s-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-glue-jobs.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-t007s-glue-jobs-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 2

            - Name: DeployGlueJobT042ztFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-glue-job-t042zt-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-glue-jobs.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-t042zt-glue-jobs-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 2

            - Name: DeployGlueJobT052Flow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-glue-job-t052-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-glue-jobs.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-t052-glue-jobs-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 2

            - Name: DeployGlueJobT052uFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-glue-job-t052u-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-glue-jobs.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-t052u-glue-jobs-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 2

            - Name: DeployGlueJobTcurrFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-glue-job-tcurr-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-glue-jobs.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-tcurr-glue-jobs-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 2

            - Name: DeployGlueJobVbpaFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-glue-job-vbpa-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-glue-jobs.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-vbpa-glue-jobs-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 2

            - Name: DeployGlueJobKna1Flow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-glue-job-kna1-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-glue-jobs.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-kna1-glue-jobs-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 2

            - Name: DeployGlueJobKnvvFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-glue-job-knvv-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-glue-jobs.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-knvv-glue-jobs-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 2

            - Name: DeployGlueJobTvakFlow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-glue-job-tvak-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-glue-jobs.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/glue/jobs/dp-sls-sales-tvak-glue-jobs-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 2

            - Name: DeployWorkflow
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-glue-workflow-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/glue/workflow/dp-sls-sales-glue-workflow.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/glue/workflow/dp-sls-sales-glue-workflow-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 3

            - Name: DeployWorkflowInitialLoad
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-glue-workflow-initial-load-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/glue/workflow/dp-sls-sales-glue-initial-load-workflow.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/glue/workflow/dp-sls-sales-glue-initial-load-workflow-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 3

        - Name: DeployEventBridgeRules
          Actions:
            - Name: DeployRules
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_IAM,CAPABILITY_NAMED_IAM
                RoleArn:
                  Fn::Sub:
                    - 'arn:aws:iam::${p}:role/svc-cloudformation-role-${Environment}'
                    - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
                StackName: !Sub dp-sls-sales-triggering-rules-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/eventbridge/dp-sls-sales-triggering-rules.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/eventbridge/dp-sls-sales-triggering-rules-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn:
                Fn::Sub:
                  - 'arn:aws:iam::${p}:role/pa-pipeline-role-${Environment}'
                  - p: !FindInMap [EnvMap, !Ref Environment, AccountNumber]
              RunOrder: 1


        - Name: DeployLambda
          Actions:
            - Name: DeployLambdaFunction
              ActionTypeId:
                Category: Deploy
                Owner: AWS
                Provider: CloudFormation
                Version: 1
              Configuration:
                ActionMode: CREATE_UPDATE
                Capabilities: CAPABILITY_AUTO_EXPAND
                RoleArn: arn:aws:iam::590184051506:role/pa-cloudformation-role-cicd
                StackName: !Sub dp-sls-sales-lambda-functions-${Environment}
                TemplatePath: SourceArtifact::resource-definitions/cloudformation/lambda/dp-sls-sales-lambda-functions.yml
                TemplateConfiguration: !Sub SourceArtifact::resource-definitions/cloudformation/lambda/dp-sls-sales-lambda-functions-conf-${Environment}.json
              InputArtifacts:
                - Name: SourceArtifact
              OutputArtifacts: []
              RunOrder: 1
        - Name: ExecuteLambda
          Actions:
            - Name: InvokeLambdaFunction
              ActionTypeId:
                Category: Invoke
                Owner: AWS
                Provider: Lambda
                Version: 1
              Configuration:
                FunctionName: !Sub sls-sales-move-glue-scripts-to-s3-${Environment}
              InputArtifacts: []
              OutputArtifacts: []
              Region: eu-west-1
              RoleArn: arn:aws:iam::590184051506:role/svc-lambda-role-cicd
              RunOrder: 1